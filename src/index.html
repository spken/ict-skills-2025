<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Lawnmower Management API</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>üßè‚Äç‚ôÇÔ∏è Lawnmower Management API</h1>
    <div>
      <p>The API is currently running on localhost:3001.</p>
      <p>Example request: <code>localhost:3001/api/lawnmower/:id/state/current</code></p>
    </div>
    <h2>Available Endpoints</h2>
    <pre><code>{
  "name": "Lawnmower Management API",
  "version": "1.0.0",
  "description": "REST API for managing lawnmower fleet",
  "endpoints": {
    "health": "GET /api/health",
    "api_info": "GET /api",
    
    "lawnmowers": {
      "get_all": "GET /api/lawnmowers",
      "get_by_id": "GET /api/lawnmower/:id",
      "create": "POST /api/lawnmower",
      "update": "PUT /api/lawnmower",
      "delete": "DELETE /api/lawnmower/:id"
    },
    
    "battery": {
      "current": "GET /api/lawnmower/:id/battery/current",
      "history": "GET /api/lawnmower/:id/battery/history?from=DATE&to=DATE",
      "add_reading": "POST /api/lawnmower/:id/battery"
    },
    
    "gps": {
      "current": "GET /api/lawnmower/:id/gps/current",
      "history": "GET /api/lawnmower/:id/gps/history?from=DATE&to=DATE",
      "add_reading": "POST /api/lawnmower/:id/gps"
    },
    
    "state": {
      "current": "GET /api/lawnmower/:id/state/current",
      "history": "GET /api/lawnmower/:id/state/history?from=DATE&to=DATE",
      "add_change": "POST /api/lawnmower/:id/state",
    },
    
    "analytics": {
      "distance": "GET /api/lawnmower/:id/analytics/distance?from=DATE&to=DATE",
      "hours": "GET /api/lawnmower/:id/analytics/hours?from=DATE&to=DATE",
      "efficiency": "GET /api/lawnmower/:id/analytics/efficency?from=DATE&to=DATE",
      "energy": "GET /api/lawnmower/:id/analytics/energy?from=DATE&to=DATE"
    },
    
    "actions": {
      "stop": "POST /api/lawnmower/:id/actions/stop",
      "start": "POST /api/lawnmower/:id/actions/start",
      "home": "POST /api/lawnmower/:id/actions/home",
      "acknowledge_error": "POST /api/lawnmower/:id/actions/ackerror",
    }
  },
  
  "query_parameters": {
    "lawnmowers": "?id=ID&name=NAME&vendor=VENDOR",
    "date_range": "?from=YYYY-MM-DD&to=YYYY-MM-DD (or YYYY-MM-DD HH:MM:SS)"
  },
  
  "example_requests": {
    "get_all_lawnmowers": "GET /api/lawnmowers",
    "get_lawnmower_by_id": "GET /api/lawnmower/507",
    "filter_lawnmowers": "GET /api/lawnmowers?vendor=Husqvarna",
    "current_battery": "GET /api/lawnmower/507/battery/current",
    "battery_history": "GET /api/lawnmower/507/battery/history?from=2025-01-01&to=2025-01-31",
    "current_position": "GET /api/lawnmower/507/gps/current",
    "current_state": "GET /api/lawnmower/507/state/current",
    "calculate_distance": "GET /api/lawnmower/507/analytics/distance?from=2025-01-01&to=2025-01-31",
    "stop_lawnmower": "POST /api/lawnmower/507/actions/stop",
    "add_battery_reading": "POST /api/lawnmower/507/battery",
    "create_lawnmower": "POST /api/lawnmower",
    "update_lawnmower": "PUT /api/lawnmower"
  }
}</code></pre>

    <h2>TCP Test Client</h2>
    <p>A Node.js test client for testing the lawnmower TCP protocol communication.</p>
    <h3>Usage</h3>
    <pre><code>Usage: node tcp-test-client.js [command] [options]

Commands:
  test-frames &lt;port&gt;     - Test with provided assignment frames
  authenticate &lt;port&gt;    - Perform full authentication
  heartbeat &lt;port&gt;       - Send heartbeat (with bypass auth)
  control &lt;port&gt; &lt;action&gt; - Send control command (0=STOP, 1=START, 2=HOME)

Examples:
  node tcp-test-client.js test-frames 5000
  node tcp-test-client.js authenticate 5000
  node tcp-test-client.js heartbeat 5000
  node tcp-test-client.js control 5000 1</code></pre>
    
    <h3>Available Commands</h3>
    <ul>
      <li><strong>test-frames</strong> - Tests the connection using the example frames provided in the assignment</li>
      <li><strong>authenticate</strong> - Performs the full Diffie-Hellman authentication handshake</li>
      <li><strong>heartbeat</strong> - Sends a heartbeat message (uses bypass authentication)</li>
      <li><strong>control</strong> - Sends control commands to the lawnmower:
        <ul>
          <li>0 = STOP</li>
          <li>1 = START</li>
          <li>2 = HOME</li>
        </ul>
      </li>
    </ul>

  </body>
</html>
